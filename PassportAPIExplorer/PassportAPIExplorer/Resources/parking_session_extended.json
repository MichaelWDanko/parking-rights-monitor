{
    "title": "Parking session extended event",
    "type": "object",
    "description": "**Event type:** `parking_session_extended`\n\n**Latest event definition version:** `3.0.0`\n\nRepresents the act of extending a parking session.\n\nEither one of the following fields is required but not both. Your Passport contact will be able to determine what is best suited for your integration.\n\n* `passport_zone_id`\n* `external_zone_id`\n\n**Inclusion of Payment Processing Details**\n\nIf you are publishing parking session events and process your payments through Passport, you will need to publish additional details when sending events.\n\nThese are the fields documented within the `payment` object of the parking session events schema and are included below for reference:\n\n- `gateway_transaction_id`\n- `payment_type`",
    "examples": [
        {
            "occurred_at": "2021-04-01T11:20:15Z",
            "session_id": "68628304",
            "start_time": "2021-04-01T14:00:00Z",
            "end_time": "2021-04-01T20:00:00Z",
            "account_id": "447c5510-ad89-4c3c-964b-71fd11e61ead",
            "operator_id": "71b47c9a-0ba3-45d3-aae7-8bfdd1e2449d",
            "passport_zone_id": "6868e70f-fdf4-4587-a0cd-e8dbd18bad9a",
            "external_zone_id": "102000021",
            "space_number": "5",
            "vehicle": {
                "vehicle_plate": "ABC1234",
                "vehicle_state": "SC",
                "vehicle_country": "US"
            },
            "event_fees": {
                "parking_fee": "1.25",
                "convenience_fee": "0.25",
                "currency_code": "USD",
                "tax": "0.10"
            },
            "total_session_fees": {
                "parking_fee": "1.25",
                "convenience_fee": "0.25",
                "tax": "0.10",
                "currency_code": "USD"
            },
            "rate_name": "$1.25 / hour",
            "location_details": {
                "latitude": 34.819753,
                "longitude": -82.3078798,
                "accuracy": 25
            },
            "payment": {
                "gateway_transaction_id": "50632ddc-f1a9-42ce-886f-d40a8e375f3b",
                "payment_type": "card"
            }
        }
    ],
    "properties": {
        "occurred_at": {
            "type": "string",
            "description": "A timestamp that represents when the event occurred. Will be in UTC time formatted as an RFC 3339 date-timestamp. The new end time for this session should be provided in the `end_time` field.",
            "format": "date-time",
            "example": "2021-04-01T11:20:15Z"
        },
        "session_id": {
            "type": "string",
            "description": "A unique machine-readable  identifier for the parking session being extended.",
            "example": "68628304"
        },
        "start_time": {
            "type": "string",
            "description": "A timestamp that represents when the session was started.  Will be in UTC time formatted as an RFC 3339 date-timestamp.",
            "format": "date-time",
            "example": "2021-04-01T14:00:00Z"
        },
        "end_time": {
            "type": "string",
            "description": "A timestamp that represents when the session will end.  Will be in UTC time formatted as an RFC 3339 date-timestamp.",
            "format": "date-time",
            "example": "2021-04-01T16:00:00Z"
        },
        "account_id": {
            "type": "string",
            "description": "An ID that represents the individual user who the parking session was created for.",
            "example": "447c5510-ad89-4c3c-964b-71fd11e61ead"
        },
        "operator_id": {
            "type": "string",
            "description": "Passport-provided unique identifier for the operator that should receive the data.",
            "example": "71b47c9a-0ba3-45d3-aae7-8bfdd1e2449d"
        },
        "passport_zone_id": {
            "type": "string",
            "description": "Passport-provided unique zone identifier.",
            "example": "6868e70f-fdf4-4587-a0cd-e8dbd18bad9a"
        },
        "external_zone_id": {
            "type": "string",
            "description": "Third party-provided unique zone identifier. Please ensure Passport has configured these zones before submitting `external_zone_id`'s.\n\nThis should not be provided if your integration is also providing the `passport_zone_id` field.",
            "example": "102000021"
        },
        "space_number": {
            "type": "string",
            "description": "If the zone is space based, this is the space number used by the parking session as it exists within the Passport system.",
            "example": "5"
        },
        "vehicle": {
            "$ref": "../models/vehicle.json"
        },
        "event_fees": {
            "type": "object",
            "description": "This object represents the fees that have been charged for this event.\n\nThe total fees that have been charged for this parking session must be provided within the `total_session_fees` object.",
            "required": [
                "parking_fee",
                "convenience_fee",
                "currency_code",
                "tax"
            ],
            "properties": {
                "parking_fee": {
                    "type": "string",
                    "description": "The cost to pay for the parking session as part of this event. Should be provided in dollar and cents format.",
                    "example": "1.25",
                    "pattern": "^[+-]?[0-9]*\\.?[0-9]+$"
                },
                "convenience_fee": {
                    "type": "string",
                    "description": "Any convenience fee applicable to this event. Should be provided in dollar and cents format.",
                    "example": "0.25",
                    "pattern": "^[+-]?[0-9]*\\.?[0-9]+$"
                },
                "currency_code": {
                    "type": "string",
                    "description": "The three digit alphabetic [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217) code.",
                    "example": "USD",
                    "pattern": "^[A-z]{3}$"
                },
                "tax": {
                    "type": "string",
                    "description": "Additional taxes not included in other fees that apply to this event.Should be provided in dollar and cents format.",
                    "example": "0.10",
                    "pattern": "^[+-]?[0-9]*\\.?[0-9]+$"
                }
            }
        },
        "total_session_fees": {
            "type": "object",
            "description": "This object represents the total fees that have been charged for this parking session.",
            "required": [
                "parking_fee",
                "convenience_fee",
                "tax",
                "currency_code"
            ],
            "properties": {
                "parking_fee": {
                    "type": "string",
                    "description": "The total cost to pay for the parking session. Should be provided in dollar and cents format.",
                    "example": "2.50",
                    "pattern": "^[+-]?[0-9]*\\.?[0-9]+$"
                },
                "convenience_fee": {
                    "type": "string",
                    "description": "The total of any convenience fees that have been charged for all events relating to this parking session.",
                    "example": "0.50",
                    "pattern": "^[+-]?[0-9]*\\.?[0-9]+$"
                },
                "tax": {
                    "type": "string",
                    "description": "The total of all taxes that have been charged for this parking session. ",
                    "example": "0.20",
                    "pattern": "^[+-]?[0-9]*\\.?[0-9]+$"
                },
                "currency_code": {
                    "type": "string",
                    "description": "The three digit alphabetic [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217) code.",
                    "example": "USD",
                    "pattern": "^[A-z]{3}$"
                }
            }
        },
        "rate_name": {
            "type": "string",
            "description": "A user friendly description of the rate that was used to calculate the fees for this parking session",
            "example": "$1.25 / hour"
        },
        "location_details": {
            "$ref": "../models/location.json"
        },
        "payment": {
            "$ref": "../models/payment.json",
            "description": "Represents fields that relate to any payment made for this event.\n\n**Required when processing payments through Passport**"
        }
    },
    "required": [
        "occurred_at",
        "session_id",
        "start_time",
        "end_time",
        "operator_id",
        "event_fees",
        "total_session_fees"
    ]
}